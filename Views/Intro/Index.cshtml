@using WebAppHealth.Models
@model IntroViewModel

@{
    ViewBag.Title = "Giới thiệu";
    Layout = "~/Views/Shared/_HealthLayout.cshtml";

    var breadcrumbs = new List<BreadcrumbItem>
{
        new BreadcrumbItem { Title = "Giới thiệu", Url = "" }
    };

    var sidebarItems = new List<SidebarItem>
{
        new SidebarItem { Title = "Lịch sử hình thành", Url = "#lich-su" },
        new SidebarItem { Title = "Tổng quan", Url = "#tong-quan" },
        new SidebarItem { Title = "Tầm nhìn", Url = "#tam-nhin" },
        new SidebarItem { Title = "Sứ mệnh", Url = "#su-menh" },
        new SidebarItem { Title = "Giá trị cốt lõi", Url = "#gia-tri" },
        new SidebarItem { Title = "Sơ đồ tổ chức", Url = "#so-do" },
        new SidebarItem { Title = "Ban giám đốc", Url = "#ban-giam-doc" },
        new SidebarItem { Title = "Phòng chức năng", Url = "#phong-chuc-nang" }
    };
}

@section Styles {
    <link rel="stylesheet" href="~/Content/css/intro.css" />
    
}

<section class="banner-title">
    <div class="container">
        @Html.Partial("_SectionTitle", "GIỚI THIỆU")
    </div>
</section>

<main class="page-container">
    <div class="container">

        @Html.Partial("_Breadcrumb", breadcrumbs)

        <div class="mt-4">
            <div class="row">

                <div class="col-lg-3">
                    @Html.Partial("_Sidebar", sidebarItems)
                </div>

                <div class="col-lg-9">

                    <section id="lich-su" class="content-section" data-aos="fade-right" data-aos-duration="1000">
                        <h2>Lịch sử hình thành</h2>
                        <ul class="content-list">
                            <li>
                                Bệnh viện được hình thành năm 1988 trên cơ sở tiếp quản tu
                                viện nằm trên địa bàn huyện Tam Bình (nay là xã Tam
                                Bình,tỉnh Vĩnh Long). Năm 1998, trở thành Trung tâm Y tế xã
                                Tam Bình quy mô 250 giường nội trú theo Quyết định số
                                725/QĐ-UB-NC của UBND Vĩnh Long.
                            </li>
                            <li>
                                Đến năm 1999, Trung tâm y tế huyện Tam Bình được nâng cấp
                                thành bệnh viện đa khoa khu vực Tam Bình trực thuộc Sở Y tế
                                TP. Hồ Chí Minh theo Quyết định số 6784/QĐ-UB.
                            </li>
                            <li>
                                Năm 2008, Bệnh viện được Ủy ban nhân dân thành phố quy hoạch
                                là Bệnh viện cửa ngõ quy mô 1000 giường nằm trong cụm y tế
                                cửa ngõ Đông Bắc thành phố.
                            </li>
                        </ul>
                    </section>

                    <section id="tong-quan" class="content-section" data-aos="fade-left" data-aos-duration="1000">
                        <h2>Tổng quan</h2>
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <ul class="content-list">
                                    <li>
                                        Bệnh viện đa khoa khu vực Tam Bình là bệnh viện hạng 2
                                        thuộc Sở Y tế tỉnh Vĩnh Long, tọa lạc tại cửa ngõ Đông
                                        Bắc thành phố. Hàng ngày, Bệnh viện khám và điều trị
                                        ngoại trú trên 2000 lượt người, điều trị nội trú trên
                                        700 giường bệnh.
                                    </li>
                                    <li>
                                        Bệnh viện có các máy móc, trang thiết bị hiện đại đáp
                                        ứng tốt nhu cầu khám chữa bệnh của người dân như: DSA,
                                        MRI, CT-Scanner, X-quang kỹ thuật số, siêu âm Doppler
                                        màu tim và mạch máu, siêu âm 3D, 4D; điện tim gắng sức,
                                        đo ECG Holter; nội soi dạ dày; xét nghiệm sinh hóa,
                                        huyết học, định lượng HBV-DNA, tầm soát ung thư…
                                    </li>
                                    <li>
                                        Ngoài ra, Bệnh viện có trên 600 nhân sự với đội ngũ y
                                        bác sĩ giỏi, tận tâm, luôn đặt sự an toàn, hài lòng của
                                        người bệnh lên hàng đầu và xem đó là tôn chỉ cho mọi
                                        hoạt động của Bệnh viện. Bệnh viện hợp tác với các bệnh
                                        viện đầu ngành trong thành phố, đồng thời là nơi thực
                                        tập của sinh viên các trường Y, Dược.
                                    </li>
                                </ul>
                                <h4 class="content-subtitle mt-3">Thành tích của đơn vị</h4>
                                <ul class="content-list simple-list">
                                    <li>Huân chương Lao động hạng 2</li>
                                    <li>Cờ đơn vị xuất sắc của Ủy ban nhân dân thành phố</li>
                                    <li>Bằng khen của Ủy ban nhân dân thành phố và Bộ Y tế.</li>
                                </ul>
                            </div>
                            <div class="col-md-4">
                                <div id="carouselTongQuan" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="3200">
                                    <div class="carousel-inner rounded shadow-sm content-carousel">
                                        <div class="carousel-item active"><img src="~/asset/banner_02.jpg" class="d-block w-100" alt="Hành lang 1" /></div>
                                        <div class="carousel-item"><img src="~/asset/banner_03.jpg" class="d-block w-100" alt="Hành lang 2" /></div>
                                        <div class="carousel-item"><img src="~/asset/banner_04.jpg" class="d-block w-100" alt="Hành lang 3" /></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="tam-nhin" class="content-section" data-aos="fade-right" data-aos-duration="1000">
                        <h2>Tầm nhìn</h2>
                        <div class="row align-items-center">
                            <div class="col-md-4">
                                <div id="carouselTamNhin" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="3000">
                                    <div class="carousel-inner rounded shadow-sm content-carousel">
                                        <div class="carousel-item active"><img src="~/asset/banner_02.jpg" class="d-block w-100" alt="Hình ảnh 1" /></div>
                                        <div class="carousel-item"><img src="~/asset/banner_03.jpg" class="d-block w-100" alt="Hình ảnh 2" /></div>
                                        <div class="carousel-item"><img src="~/asset/banner_04.jpg" class="d-block w-100" alt="Hình ảnh 3" /></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <ul class="content-list">
                                    <li>
                                        Trở thành bệnh viện đa khoa uy tín trong khu vực, có
                                        chất lượng chuyên môn và phục vụ tốt, toàn diện.
                                    </li>
                                    <li>Cung cấp dịch vụ y tế chuyên sâu đa dạng.</li>
                                    <li>
                                        Có đội ngũ nhân viên giỏi, nhiều kinh nghiệm, đáp ứng
                                        tốt nhất nhu cầu tầm soát, điều trị và chăm sóc sức khỏe
                                        của tất cả mọi người.
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <section id="su-menh" class="content-section" data-aos="fade-left" data-aos-duration="1000">
                        <h2>Sứ mệnh</h2>
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <ul class="content-list">
                                    <li>
                                        Bệnh viện phát triển theo từng giai đoạn đầu tư, mở rộng
                                        dần phạm vi hoạt động, trở thành trung tâm đào tạo và
                                        nghiên cứu khoa học, nâng cao chất lương khám chữa bệnh,
                                        là nơi cung ứng dịch vụ chăm sóc y tế chất lượng tốt và
                                        chuyên nghiệp; luôn đổi mới để hướng đến sự hoàn thiện
                                        trong mọi hoạt động nhằm phát triển bền vững thương hiệu
                                        bệnh viện.
                                    </li>
                                    <li>
                                        Chúng tôi luôn luôn tạo môi trường và điều kiện làm việc
                                        tốt nhất cho mọi nhân viên của bệnh viện; bệnh viện luôn
                                        là nơi tập hợp của những nhân viên tài năng, cầu tiến và
                                        nhiều kinh nghiệm; tích cực đầu tư, ứng dụng các trang
                                        thiết bị chẩn đoán và điều trị hiện đại. Tất cả nhằm mục
                                        đích mang đến cho bệnh nhân chất lượng khám bệnh, chữa
                                        bệnh và dịch vụ chăm sóc sức khỏe tốt nhất.
                                    </li>
                                    <li>
                                        Chúng tôi luôn nêu cao tinh thần trách nhiệm với cộng
                                        đồng; lấy lợi ích và sức khỏe của bệnh nhân làm mục tiêu
                                        trong mọi hoạt động; luôn lắng nghe và chia sẻ để đạt
                                        được sự hài lòng và tin tưởng của người bệnh và thân
                                        nhân. Sự hài lòng và tin tưởng của người bệnh và thân
                                        nhân chính là thước đo thành công của Bệnh viện Đa khoa
                                        Khu Vực Tam Bình.
                                    </li>
                                </ul>
                            </div>
                            <div class="col-md-4">
                                <div id="carouselSuMenh" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="3400">
                                    <div class="carousel-inner rounded shadow-sm content-carousel">
                                        <div class="carousel-item active"><img src="~/asset/banner_04.jpg" class="d-block w-100" alt="Sứ mệnh 1" /></div>
                                        <div class="carousel-item"><img src="~/asset/banner_06.jpg" class="d-block w-100" alt="Sứ mệnh 2" /></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="gia-tri" class="content-section" data-aos="fade-right" data-aos-duration="1000">
                        <h2>Giá trị cốt lõi</h2>
                        <div class="row align-items-center">
                            <div class="col-md-4">
                                <div id="carouselGiaTri" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="3500">
                                    <div class="carousel-inner rounded shadow-sm content-carousel">
                                        <div class="carousel-item active"><img src="~/asset/banner_06.jpg" class="d-block w-100" alt="Giá trị 1" /></div>
                                        <div class="carousel-item"><img src="~/asset/banner_04.jpg" class="d-block w-100" alt="Giá trị 2" /></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <h4 class="content-subtitle">Tận tâm - Trách nhiệm - Chia sẻ</h4>
                                <ul class="content-list">
                                    <li>
                                        Tận tâm: Bệnh viện chúng tôi luôn hết lòng vì người
                                        bệnh, Những dịch vụ chăm sóc sức khỏe mà chúng tôi hướng
                                        tới cộng đồng luôn đảm bảo chất lượng và an toàn.
                                    </li>
                                    <li>
                                        Trách nhiệm: Bệnh viện chúng tôi luôn có trách nhiệm với
                                        cộng đồng và xã hội, Mỗi nhân viên của chúng tôi luôn có
                                        trách nhiệm với nghề nghiệp của chính mình.
                                    </li>
                                    <li>
                                        Chia sẻ: Mỗi nhân viên của Bệnh viện chúng tôi sẽ luôn
                                        cố gắng tìm hiểu, lắng nghe để đáp ứng nhu cầu của khách
                                        hàng, đồng cảm và chia sẻ những khó khăn với người bệnh,
                                        với đồng nghiệp.
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <section id="so-do" class="content-section" data-aos="fade-left" data-aos-duration="1000">
                        <h2>Sơ đồ tổ chức</h2>
                        <img src="~/asset/medical-background.jpg" class="img-fluid rounded" alt="Sơ đồ tổ chức" />
                    </section>

                    <section id="ban-giam-doc" class="content-section" data-aos="fade-right" data-aos-duration="1000">
                        <h2>Ban giám đốc</h2>

                        @if (Model.Directors != null && Model.Directors.Count > 0)
                        {

                            foreach (var doctor in Model.Directors)
                            {

                                string tenChucVu = "Chưa cập nhật";
                                if (doctor.PositionID != null && Model.PositionMap.ContainsKey(doctor.PositionID.Value))
                                {
                                    tenChucVu = Model.PositionMap[doctor.PositionID.Value];
                                }

                                <div class="director-card">
                                    <div class="row g-0">
                                        <div class="col-lg-4 col-md-5">
                                            <img src="~/asset/@(string.IsNullOrEmpty(doctor.Avatar) ? "avatar-default.jpg" : doctor.Avatar)"
                                                 class="img-fluid director-img"
                                                 alt="@doctor.FullName" />
                                        </div>
                                        <div class="col-lg-8 col-md-7">
                                            <div class="director-info">
                                                <div class="director-title-stack">
                                                    <div class="director-role-banner">@doctor.Degree</div>
                                                    <div class="director-name-banner">
                                                        <h4 class="director-name">@doctor.FullName</h4>
                                                    </div>
                                                </div>
                                                <ul class="director-details">
                                                    <li><strong>Thông tin:</strong> @doctor.Bio</li>
                                                    <li><strong>Chức vụ:</strong> @tenChucVu</li>
                                                </ul>

                                                <button type="button" class="btn btn-outline-success btn-sm"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#directorModal"
                                                        data-name="@doctor.FullName"
                                                        data-role="@doctor.Degree"
                                                        data-image="/asset/@doctor.Avatar"
                                                        data-hocvi="@doctor.Bio"
                                                        data-chuyenkhoa="@(doctor.Department != null ? doctor.Department.Name : "Chưa cập nhật")"
                                                        data-chucvu="@tenChucVu"
                                                        data-lichlamviec="Thứ 2 - Thứ 6: 8:00 - 17:00">
                                                    Xem chi tiết
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        }
                        else
                        {
                            <div class="alert alert-light">Thông tin Ban giám đốc đang được cập nhật.</div>
                        }
                    </section>

                    <section id="phong-chuc-nang" class="content-section" data-aos="fade-up" data-aos-duration="1000">
                        <h2>Phòng chức năng</h2>
                        <div class="row">
                            @if (Model.FunctionalDepartments != null && Model.FunctionalDepartments.Count > 0)
                            {
                                foreach (var dept in Model.FunctionalDepartments)
                                {
                                    <div class="col-lg-4 col-md-6 mb-4">
                                        <a href="@Url.Action("PhongChucNang", "Intro")#@dept.slug" class="department-card-link">
                                            <div class="card department-card h-100">
                                                <div class="department-card-img-wrapper">

                                                    <img src="~/asset/@(string.IsNullOrEmpty(dept.ImageUrl) ? "banner_default.jpg" : dept.ImageUrl)"
                                                         alt="@dept.Name" />

                                                    <div class="department-overlay">
                                                        <span class="department-overlay-text">Xem chi tiết</span>
                                                    </div>
                                                </div>
                                                <div class="card-body">
                                                    <h5 class="card-title">@dept.Name</h5>
                                                    <p class="card-text text-truncate">"@dept.Description"</p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                }
                            }
                            else
                            {
                                <div class="col-12"><p>Danh sách phòng chức năng đang được cập nhật.</p></div>
                            }
                        </div>
                    </section>

                </div>
            </div>
        </div>
    </div>
</main>

<div class="modal fade" id="directorModal" tabindex="-1" aria-labelledby="directorModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="directorModalLabel">Thông tin Bác Sĩ</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-4">
                        <img id="modalDirectorImage" src="" class="img-fluid rounded" alt="Ảnh bác sĩ" />
                    </div>
                    <div class="col-md-8">
                        <h3 id="modalDirectorName" class="director-name-modal"></h3>
                        <span id="modalDirectorRole" class="director-role-modal"></span>
                        <table class="table table-borderless table-sm mt-3">
                            <tbody>
                                <tr><td style="width: 120px"><strong>Thông tin:</strong></td><td id="modalDirectorHocVi"></td></tr>
                                <tr><td><strong>Chuyên khoa:</strong></td><td id="modalDirectorChuyenKhoa"></td></tr>
                                <tr><td><strong>Chức vụ:</strong></td><td id="modalDirectorChucVu"></td></tr>
                                <tr><td><strong>Lịch làm việc:</strong></td><td id="modalDirectorLich"></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-bs-dismiss="modal" style="background-color: var(--main); border-color: var(--main)">Đóng</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var directorModal = document.getElementById("directorModal");
            if (directorModal) {
                directorModal.addEventListener("show.bs.modal", function (event) {
                    // Lấy nút vừa được bấm
                    var button = event.relatedTarget;

                    // Lấy dữ liệu từ data attribute
                    var name = button.getAttribute("data-name");
                    var role = button.getAttribute("data-role");
                    var image = button.getAttribute("data-image");
                    var hocvi = button.getAttribute("data-hocvi");
                    var chuyenkhoa = button.getAttribute("data-chuyenkhoa");
                    var chucvu = button.getAttribute("data-chucvu");
                    var lich = button.getAttribute("data-lichlamviec");

                    // Đổ dữ liệu vào Modal
                    directorModal.querySelector("#modalDirectorName").textContent = name;
                    directorModal.querySelector("#modalDirectorRole").textContent = role;
                    directorModal.querySelector("#modalDirectorImage").src = image;
                    directorModal.querySelector("#modalDirectorHocVi").textContent = hocvi;
                    directorModal.querySelector("#modalDirectorChuyenKhoa").textContent = chuyenkhoa;
                    directorModal.querySelector("#modalDirectorChucVu").textContent = chucvu;
                    directorModal.querySelector("#modalDirectorLich").textContent = lich;
                });
            }
        });
    </script>
}